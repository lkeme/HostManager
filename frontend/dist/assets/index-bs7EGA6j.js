import{k as ge,N as de,d as ce,i as me,j as ue,l as Ae}from"./Page.vue_vue_type_script_setup_true_lang-CGp0KsDw.js";import{j as H,l as h,m as j,n as f,b as B,J as V,O as Ce,w as fe,P as pe,E as xe,z as a,Q as be,R as _e,T as Ze,y as s,A as S,B as v,U as he,V as we,D as ye,q as Ne,s as Be,_ as De}from"./index-hxwrSVlQ.js";const je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Me=f("path",{d:"M336 208v-95a80 80 0 0 0-160 0v95",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),We=f("rect",{x:"96",y:"208",width:"320",height:"272",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Se=[Me,We],R=H({name:"LockClosedOutline",render:function(t,o){return h(),j("svg",je,Se)}}),ve="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8IS0tIOWkluWPkeWFieaViOaenCAtLT4NCiAgICA8ZmlsdGVyIGlkPSJnbG93IiB4PSItNTAlIiB5PSItNTAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIj4NCiAgICAgICAgPGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VHcmFwaGljIiBzdGREZXZpYXRpb249IjIiIHJlc3VsdD0iYmx1ciIvPg0KICAgICAgICA8ZmVNZXJnZT4NCiAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iYmx1ciIvPg0KICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+DQogICAgICAgIDwvZmVNZXJnZT4NCiAgICA8L2ZpbHRlcj4NCg0KICAgIDwhLS0g57KS5a2Q54m55pWIIC0tPg0KICAgIDxnIGlkPSJwYXJ0aWNsZXMiPg0KICAgICAgICA8IS0tIOWIm+W7uueykuWtkCAtLT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMTAwIiByPSIyIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjVzIiB2YWx1ZXM9IjIwMDsyMTA7MTkwOzIwMCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjVzIiB2YWx1ZXM9IjEwMDsxMTA7OTA7MTAwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMTAwIiByPSIyIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjVzIiB2YWx1ZXM9IjIwMDsxOTA7MjEwOzIwMCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjVzIiB2YWx1ZXM9IjEwMDs5MDsxMTA7MTAwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICAgICAgPCEtLSDmt7vliqDmm7TlpJrnmoTnspLlrZAgLS0+DQogICAgICAgIDxjaXJjbGUgY3g9IjE4MCIgY3k9IjkwIiByPSIzIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjZzIiB2YWx1ZXM9IjE4MDsxOTA7MTcwOzE4MCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjZzIiB2YWx1ZXM9IjkwOzEwMDs4MDs5MCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgICAgIDxjaXJjbGUgY3g9IjIyMCIgY3k9IjExMCIgcj0iNCIgZmlsbD0iI2ZmYzBjYiI+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJjeCIgZHVyPSI0cyIgdmFsdWVzPSIyMjA7MjMwOzIxMDsyMjAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJjeSIgZHVyPSI0cyIgdmFsdWVzPSIxMTA7MTIwOzEwMDsxMTAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgIDwvY2lyY2xlPg0KICAgICAgICA8IS0tIOabtOaUueeykuWtkOminOiJsuWSjOWkp+WwjyAtLT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjUwIiBjeT0iODAiIHI9IjIiIGZpbGw9IiNmZmMwY2IiPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGR1cj0iNXMiIHZhbHVlcz0iMjUwOzI2MDsyNDA7MjUwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3kiIGR1cj0iNXMiIHZhbHVlcz0iODA7OTA7NzA7ODAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgIDwvY2lyY2xlPg0KICAgICAgICA8Y2lyY2xlIGN4PSIxNTAiIGN5PSIxMjAiIHI9IjMiIGZpbGw9IiNmZmMwY2IiPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGR1cj0iNXMiIHZhbHVlcz0iMTUwOzE2MDsxNDA7MTUwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3kiIGR1cj0iNXMiIHZhbHVlcz0iMTIwOzEzMDsxMTA7MTIwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICA8L2c+DQoNCiAgICA8IS0tIEhNIOaWh+WtlyAtLT4NCiAgICA8dGV4dCB4PSI1MCUiIHk9IjUwJSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwMCIgZmlsbD0iI2UzZTM4NyIgZmlsdGVyPSJ1cmwoI2dsb3cpIj5IIE08L3RleHQ+DQo8L3N2Zz4NCg==",E="3.7.7",Re=E,_=typeof Buffer=="function",Y=typeof TextDecoder=="function"?new TextDecoder:void 0,X=typeof TextEncoder=="function"?new TextEncoder:void 0,Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w=Array.prototype.slice.call(Ue),D=(e=>{let t={};return e.forEach((o,I)=>t[o]=I),t})(w),Ge=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,i=String.fromCharCode.bind(String),z=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),L=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Q=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),$=e=>{let t,o,I,l,r="";const Z=e.length%3;for(let u=0;u<e.length;){if((o=e.charCodeAt(u++))>255||(I=e.charCodeAt(u++))>255||(l=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=o<<16|I<<8|l,r+=w[t>>18&63]+w[t>>12&63]+w[t>>6&63]+w[t&63]}return Z?r.slice(0,Z-3)+"===".substring(Z):r},P=typeof btoa=="function"?e=>btoa(e):_?e=>Buffer.from(e,"binary").toString("base64"):$,U=_?e=>Buffer.from(e).toString("base64"):e=>{let o=[];for(let I=0,l=e.length;I<l;I+=4096)o.push(i.apply(null,e.subarray(I,I+4096)));return P(o.join(""))},M=(e,t=!1)=>t?L(U(e)):U(e),Pe=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?i(192|t>>>6)+i(128|t&63):i(224|t>>>12&15)+i(128|t>>>6&63)+i(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return i(240|t>>>18&7)+i(128|t>>>12&63)+i(128|t>>>6&63)+i(128|t&63)}},ke=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,K=e=>e.replace(ke,Pe),F=_?e=>Buffer.from(e,"utf8").toString("base64"):X?e=>U(X.encode(e)):e=>P(K(e)),b=(e,t=!1)=>t?L(F(e)):F(e),O=e=>b(e,!0),Te=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ve=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),o=t-65536;return i((o>>>10)+55296)+i((o&1023)+56320);case 3:return i((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return i((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},q=e=>e.replace(Te,Ve),ee=e=>{if(e=e.replace(/\s+/g,""),!Ge.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,o="",I,l;for(let r=0;r<e.length;)t=D[e.charAt(r++)]<<18|D[e.charAt(r++)]<<12|(I=D[e.charAt(r++)])<<6|(l=D[e.charAt(r++)]),o+=I===64?i(t>>16&255):l===64?i(t>>16&255,t>>8&255):i(t>>16&255,t>>8&255,t&255);return o},k=typeof atob=="function"?e=>atob(Q(e)):_?e=>Buffer.from(e,"base64").toString("binary"):ee,te=_?e=>z(Buffer.from(e,"base64")):e=>z(k(e).split("").map(t=>t.charCodeAt(0))),oe=e=>te(re(e)),Ye=_?e=>Buffer.from(e,"base64").toString("utf8"):Y?e=>Y.decode(te(e)):e=>q(k(e)),re=e=>Q(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),G=e=>Ye(re(e)),Xe=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},se=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),ne=function(){const e=(t,o)=>Object.defineProperty(String.prototype,t,se(o));e("fromBase64",function(){return G(this)}),e("toBase64",function(t){return b(this,t)}),e("toBase64URI",function(){return b(this,!0)}),e("toBase64URL",function(){return b(this,!0)}),e("toUint8Array",function(){return oe(this)})},ae=function(){const e=(t,o)=>Object.defineProperty(Uint8Array.prototype,t,se(o));e("toBase64",function(t){return M(this,t)}),e("toBase64URI",function(){return M(this,!0)}),e("toBase64URL",function(){return M(this,!0)})},ze=()=>{ne(),ae()},J={version:E,VERSION:Re,atob:k,atobPolyfill:ee,btoa:P,btoaPolyfill:$,fromBase64:G,toBase64:b,encode:b,encodeURI:O,encodeURL:O,utob:K,btou:q,decode:G,isValid:Xe,fromUint8Array:M,toUint8Array:oe,extendString:ne,extendUint8Array:ae,extendBuiltins:ze},Fe=e=>(Ne("data-v-aba6ec2a"),e=e(),Be(),e),Oe={class:"view-auth-bg flex flex-col h-full"},Je={class:"flex-1 px-8 py-4 max-w-[384px] min-w-[320px mx-auto"},He={class:"py-8 text-center"},Ee=Fe(()=>f("div",{class:""},[f("img",{src:ve,alt:"logo",class:"mx-auto"})],-1)),Le={key:0,class:"text-sm text-red-500"},Qe={key:0,class:"view-auth-register-form"},$e={key:1,class:"view-auth-login-form"},Ke=H({__name:"index",setup(e){const t=B(),o=V({password:"",confirm_password:""}),I=g=>{var n;g.preventDefault(),(n=t.value)==null||n.validate(async d=>{var m;if(d)$message.error("注册信息填写有误，请检查后重新填写");else{$message.loading("尝试注册中..."),p.value=!0;try{const c=await he(o.password,o.confirm_password),{data:A}=c;if($message.destroyAll(),A.status){const x=decodeURIComponent(((m=N.query)==null?void 0:m.redirect)||"/");$message.success("注册成功，即将进入系统"),N.name==="/login"?await y.replace("/"):await y.replace(x)}else $message.error(A.message||"注册失败")}finally{p.value=!1}}})},l=B(),r=V({password:"",remember:!1}),Z=g=>{var n;g.preventDefault(),(n=l.value)==null||n.validate(async d=>{var m;if(d)$message.error("登录信息填写有误，请检查后重新填写");else{$message.loading("尝试登录中..."),p.value=!0;try{const c=await we(r.password),{data:A}=c;if($message.destroyAll(),A.status){ie();const x=decodeURIComponent(((m=N.query)==null?void 0:m.redirect)||"/");$message.success("登录成功，即将进入系统"),N.name==="/login"?await y.replace("/"):await y.replace(x)}else $message.error(A.message||"登录失败")}finally{p.value=!1}}})},u=Ce(),ie=()=>{if(r.remember){u.setRememberInfo(J.encode(JSON.stringify(r)));return}u.removeRememberInfo()},Ie=()=>{const g=u.getRememberInfo();if(g){const n=JSON.parse(J.decode(g));r.password=n.password,r.remember=n.remember}},p=B(!1),y=be(),N=_e(),T={password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"密码长度应为8-16",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/,message:"密码必须包含数字和字母",trigger:"blur"}],confirm_password:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(g,n,d)=>{n===o.password?d():d(new Error("两次输入密码不一致"))},trigger:"blur"}]},W=B(!1);return fe(()=>{pe().then(g=>{W.value=g.data.is_register}),Ie()}),(g,n)=>{const d=de,m=ce,c=me,A=ye,x=ue,le=Ae;return h(),xe(ge,null,{default:a(()=>[f("div",Oe,[f("div",Je,[f("div",He,[Ee,W.value?Ze("",!0):(h(),j("div",Le,"当前还未注册"))]),W.value?(h(),j("div",$e,[s(x,{ref_key:"loginFormRef",ref:l,"label-placement":"left",size:"large",model:r,rules:T},{default:a(()=>[s(c,{path:"password"},{default:a(()=>[s(m,{value:r.password,"onUpdate:value":n[2]||(n[2]=C=>r.password=C),type:"password",showPasswordOn:"click",placeholder:"请输入密码"},{prefix:a(()=>[s(d,{size:"18",color:"#808695"},{default:a(()=>[s(S(R))]),_:1})]),_:1},8,["value"])]),_:1}),s(c,null,{default:a(()=>[s(le,{checked:r.remember,"onUpdate:checked":n[3]||(n[3]=C=>r.remember=C)},{default:a(()=>[v("记住密码")]),_:1},8,["checked"])]),_:1}),s(c,null,{default:a(()=>[s(A,{type:"primary",onClick:Z,size:"large",loading:p.value,block:""},{default:a(()=>[v(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):(h(),j("div",Qe,[s(x,{ref_key:"registerFormRef",ref:t,"label-placement":"left",size:"large",model:o,rules:T},{default:a(()=>[s(c,{path:"password"},{default:a(()=>[s(m,{value:o.password,"onUpdate:value":n[0]||(n[0]=C=>o.password=C),placeholder:"请输入密码"},{prefix:a(()=>[s(d,{size:"18",color:"#808695"},{default:a(()=>[s(S(R))]),_:1})]),_:1},8,["value"])]),_:1}),s(c,{path:"confirm_password"},{default:a(()=>[s(m,{value:o.confirm_password,"onUpdate:value":n[1]||(n[1]=C=>o.confirm_password=C),type:"password",showPasswordOn:"click",placeholder:"请确认密码"},{prefix:a(()=>[s(d,{size:"18",color:"#808695"},{default:a(()=>[s(S(R))]),_:1})]),_:1},8,["value"])]),_:1}),s(c,null,{default:a(()=>[s(A,{type:"primary",onClick:I,size:"large",loading:p.value,block:""},{default:a(()=>[v(" 注册 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))])])]),_:1})}}}),tt=De(Ke,[["__scopeId","data-v-aba6ec2a"]]);export{tt as default};
