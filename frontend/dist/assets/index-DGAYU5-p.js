import{M as v,z as ge,_ as de,O as ce,P as me,n as ue,K as Ae}from"./Frame.vue_vue_type_script_setup_true_lang-BenmIN5n.js";import{d as H,b as N,aH as Y,aI as Ce,aJ as fe,aK as pe,aF as xe,aL as be,ap as Z,aq as B,as as W,aM as _e,aw as a,av as n,aB as S,aD as P,aN as Ze,M as we,aO as ye,aP as he,aQ as Ne,aG as Be,au as De}from"./index-D1AM-4u-.js";const Me="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8IS0tIOWkluWPkeWFieaViOaenCAtLT4NCiAgICA8ZmlsdGVyIGlkPSJnbG93IiB4PSItNTAlIiB5PSItNTAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIj4NCiAgICAgICAgPGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VHcmFwaGljIiBzdGREZXZpYXRpb249IjIiIHJlc3VsdD0iYmx1ciIvPg0KICAgICAgICA8ZmVNZXJnZT4NCiAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iYmx1ciIvPg0KICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+DQogICAgICAgIDwvZmVNZXJnZT4NCiAgICA8L2ZpbHRlcj4NCg0KICAgIDwhLS0g57KS5a2Q54m55pWIIC0tPg0KICAgIDxnIGlkPSJwYXJ0aWNsZXMiPg0KICAgICAgICA8IS0tIOWIm+W7uueykuWtkCAtLT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMTAwIiByPSIyIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjVzIiB2YWx1ZXM9IjIwMDsyMTA7MTkwOzIwMCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjVzIiB2YWx1ZXM9IjEwMDsxMTA7OTA7MTAwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMTAwIiByPSIyIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjVzIiB2YWx1ZXM9IjIwMDsxOTA7MjEwOzIwMCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjVzIiB2YWx1ZXM9IjEwMDs5MDsxMTA7MTAwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICAgICAgPCEtLSDmt7vliqDmm7TlpJrnmoTnspLlrZAgLS0+DQogICAgICAgIDxjaXJjbGUgY3g9IjE4MCIgY3k9IjkwIiByPSIzIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjZzIiB2YWx1ZXM9IjE4MDsxOTA7MTcwOzE4MCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjZzIiB2YWx1ZXM9IjkwOzEwMDs4MDs5MCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgICAgIDxjaXJjbGUgY3g9IjIyMCIgY3k9IjExMCIgcj0iNCIgZmlsbD0iI2ZmYzBjYiI+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJjeCIgZHVyPSI0cyIgdmFsdWVzPSIyMjA7MjMwOzIxMDsyMjAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJjeSIgZHVyPSI0cyIgdmFsdWVzPSIxMTA7MTIwOzEwMDsxMTAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgIDwvY2lyY2xlPg0KICAgICAgICA8IS0tIOabtOaUueeykuWtkOminOiJsuWSjOWkp+WwjyAtLT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjUwIiBjeT0iODAiIHI9IjIiIGZpbGw9IiNmZmMwY2IiPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGR1cj0iNXMiIHZhbHVlcz0iMjUwOzI2MDsyNDA7MjUwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3kiIGR1cj0iNXMiIHZhbHVlcz0iODA7OTA7NzA7ODAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgIDwvY2lyY2xlPg0KICAgICAgICA8Y2lyY2xlIGN4PSIxNTAiIGN5PSIxMjAiIHI9IjMiIGZpbGw9IiNmZmMwY2IiPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGR1cj0iNXMiIHZhbHVlcz0iMTUwOzE2MDsxNDA7MTUwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3kiIGR1cj0iNXMiIHZhbHVlcz0iMTIwOzEzMDsxMTA7MTIwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICA8L2c+DQoNCiAgICA8IS0tIEhNIOaWh+WtlyAtLT4NCiAgICA8dGV4dCB4PSI1MCUiIHk9IjUwJSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIg0KICAgICAgICAgIGZvbnQtc2l6ZT0iMTAwIiBmaWxsPSIjZTNlMzg3IiBmaWx0ZXI9InVybCgjZ2xvdykiPkggTQ0KICAgIDwvdGV4dD4NCjwvc3ZnPg0K",L="3.7.7",We=L,b=typeof Buffer=="function",k=typeof TextDecoder=="function"?new TextDecoder:void 0,X=typeof TextEncoder=="function"?new TextEncoder:void 0,je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w=Array.prototype.slice.call(je),D=(e=>{let t={};return e.forEach((o,I)=>t[o]=I),t})(w),ve=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,i=String.fromCharCode.bind(String),z=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),E=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Q=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),K=e=>{let t,o,I,d,r="";const _=e.length%3;for(let u=0;u<e.length;){if((o=e.charCodeAt(u++))>255||(I=e.charCodeAt(u++))>255||(d=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=o<<16|I<<8|d,r+=w[t>>18&63]+w[t>>12&63]+w[t>>6&63]+w[t&63]}return _?r.slice(0,_-3)+"===".substring(_):r},T=typeof btoa=="function"?e=>btoa(e):b?e=>Buffer.from(e,"binary").toString("base64"):K,G=b?e=>Buffer.from(e).toString("base64"):e=>{let o=[];for(let I=0,d=e.length;I<d;I+=4096)o.push(i.apply(null,e.subarray(I,I+4096)));return T(o.join(""))},M=(e,t=!1)=>t?E(G(e)):G(e),Se=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?i(192|t>>>6)+i(128|t&63):i(224|t>>>12&15)+i(128|t>>>6&63)+i(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return i(240|t>>>18&7)+i(128|t>>>12&63)+i(128|t>>>6&63)+i(128|t&63)}},Pe=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,$=e=>e.replace(Pe,Se),F=b?e=>Buffer.from(e,"utf8").toString("base64"):X?e=>G(X.encode(e)):e=>T($(e)),x=(e,t=!1)=>t?E(F(e)):F(e),O=e=>x(e,!0),Ge=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Re=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),o=t-65536;return i((o>>>10)+55296)+i((o&1023)+56320);case 3:return i((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return i((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},q=e=>e.replace(Ge,Re),ee=e=>{if(e=e.replace(/\s+/g,""),!ve.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,o="",I,d;for(let r=0;r<e.length;)t=D[e.charAt(r++)]<<18|D[e.charAt(r++)]<<12|(I=D[e.charAt(r++)])<<6|(d=D[e.charAt(r++)]),o+=I===64?i(t>>16&255):d===64?i(t>>16&255,t>>8&255):i(t>>16&255,t>>8&255,t&255);return o},U=typeof atob=="function"?e=>atob(Q(e)):b?e=>Buffer.from(e,"base64").toString("binary"):ee,te=b?e=>z(Buffer.from(e,"base64")):e=>z(U(e).split("").map(t=>t.charCodeAt(0))),oe=e=>te(ae(e)),Te=b?e=>Buffer.from(e,"base64").toString("utf8"):k?e=>k.decode(te(e)):e=>q(U(e)),ae=e=>Q(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),R=e=>Te(ae(e)),Ue=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},re=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),se=function(){const e=(t,o)=>Object.defineProperty(String.prototype,t,re(o));e("fromBase64",function(){return R(this)}),e("toBase64",function(t){return x(this,t)}),e("toBase64URI",function(){return x(this,!0)}),e("toBase64URL",function(){return x(this,!0)}),e("toUint8Array",function(){return oe(this)})},ne=function(){const e=(t,o)=>Object.defineProperty(Uint8Array.prototype,t,re(o));e("toBase64",function(t){return M(this,t)}),e("toBase64URI",function(){return M(this,!0)}),e("toBase64URL",function(){return M(this,!0)})},Ve=()=>{se(),ne()},J={version:L,VERSION:We,atob:U,atobPolyfill:ee,btoa:T,btoaPolyfill:K,fromBase64:R,toBase64:x,encode:x,encodeURI:O,encodeURL:O,utob:$,btou:q,decode:R,isValid:Ue,fromUint8Array:M,toUint8Array:oe,extendString:se,extendUint8Array:ne,extendBuiltins:Ve},Ye=e=>(ye("data-v-5c49d8c6"),e=e(),he(),e),ke={class:"flex flex-col h-full w-full view-auth-bg"},Xe={class:"flex-1 px-8 py-4 max-w-[384px] min-w-[320px] mx-auto"},ze={class:"py-8 text-center"},Fe=Ye(()=>W("div",{class:""},[W("img",{src:Me,alt:"logo",class:"mx-auto"})],-1)),Oe={key:0,class:"text-sm text-red-500"},Je={key:0,class:"view-auth-register-form"},He={key:1,class:"view-auth-login-form"},Le=H({__name:"index",setup(e){const t=N(),o=Y({password:"",confirm_password:""}),I=c=>{var l;const s=async()=>{var g;$message.loading("尝试注册中..."),f.value=!0;try{const m=await Ne(o.password,o.confirm_password),{data:A}=m;if($message.destroyAll(),A.status){const p=decodeURIComponent(((g=h.query)==null?void 0:g.redirect)||"/");$message.success("注册成功，即将进入系统"),h.name==="/login"?await y.replace("/"):await y.replace(p)}else $message.error(A.message||"注册失败")}finally{f.value=!1}};c.preventDefault(),(l=t.value)==null||l.validate(async g=>{if(g){$message.error("注册信息填写有误，请检查后重新填写");return}$dialog.warning({title:"注册提示",content:"注册密码非常重要，如果密码丢失，数据不可找回，请牢记您的密码",negativeText:"再想想",positiveText:"继续注册？",onPositiveClick:s,onNegativeClick:()=>{}})})},d=N(),r=Y({password:"",remember:!1}),_=c=>{var s;c.preventDefault(),(s=d.value)==null||s.validate(async l=>{var g;if(l){$message.error("登录信息填写有误，请检查后重新填写");return}$message.loading("尝试登录中..."),f.value=!0;try{const m=await Ze(r.password),{data:A}=m;if($message.destroyAll(),A.status){ie();const p=decodeURIComponent(((g=h.query)==null?void 0:g.redirect)||"/");$message.success("登录成功"),h.name==="/login"?await y.replace("/"):await y.replace(p)}else $message.error(A.message||"登录失败")}finally{f.value=!1}})},u=Ce(),ie=()=>{if(r.remember){u.setRememberInfo(J.encode(JSON.stringify(r)));return}u.removeRememberInfo()},Ie=()=>{const c=u.getRememberInfo();if(c){const s=JSON.parse(J.decode(c));r.password=s.password,r.remember=s.remember}},f=N(!1),y=fe(),h=pe(),V={password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"密码长度应为8-16",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/,message:"密码必须包含数字和字母",trigger:"blur"}],confirm_password:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(c,s,l)=>{s===o.password?l():l(new Error("两次输入密码不匹配"))},trigger:"blur"}]},j=N(!1);return xe(()=>{be().then(c=>{j.value=c.data.is_register}),Ie()}),(c,s)=>{const l=ge,g=de,m=ce,A=we,p=me,le=ue;return Z(),B("div",ke,[W("div",Xe,[W("div",ze,[Fe,j.value?_e("",!0):(Z(),B("div",Oe,"当前还未注册"))]),j.value?(Z(),B("div",He,[a(p,{ref_key:"loginFormRef",ref:d,"label-placement":"left",size:"large",model:r,rules:V},{default:n(()=>[a(m,{path:"password"},{default:n(()=>[a(g,{value:r.password,"onUpdate:value":s[2]||(s[2]=C=>r.password=C),type:"password",showPasswordOn:"click",placeholder:"请输入密码"},{prefix:n(()=>[a(l,{size:"18",color:"#808695"},{default:n(()=>[a(S(v))]),_:1})]),_:1},8,["value"])]),_:1}),a(m,null,{default:n(()=>[a(le,{checked:r.remember,"onUpdate:checked":s[3]||(s[3]=C=>r.remember=C)},{default:n(()=>[P("记住密码")]),_:1},8,["checked"])]),_:1}),a(m,null,{default:n(()=>[a(A,{type:"primary",onClick:_,size:"large",loading:f.value,block:""},{default:n(()=>[P(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):(Z(),B("div",Je,[a(p,{ref_key:"registerFormRef",ref:t,"label-placement":"left",size:"large",model:o,rules:V},{default:n(()=>[a(m,{path:"password"},{default:n(()=>[a(g,{value:o.password,"onUpdate:value":s[0]||(s[0]=C=>o.password=C),type:"password",showPasswordOn:"click",placeholder:"请输入密码"},{prefix:n(()=>[a(l,{size:"18",color:"#808695"},{default:n(()=>[a(S(v))]),_:1})]),_:1},8,["value"])]),_:1}),a(m,{path:"confirm_password"},{default:n(()=>[a(g,{value:o.confirm_password,"onUpdate:value":s[1]||(s[1]=C=>o.confirm_password=C),type:"password",showPasswordOn:"click",placeholder:"请再次输入密码"},{prefix:n(()=>[a(l,{size:"18",color:"#808695"},{default:n(()=>[a(S(v))]),_:1})]),_:1},8,["value"])]),_:1}),a(m,null,{default:n(()=>[a(A,{type:"primary",onClick:I,size:"large",loading:f.value,block:""},{default:n(()=>[P(" 注册 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))])])}}}),Ee=Be(Le,[["__scopeId","data-v-5c49d8c6"]]),$e=H({__name:"index",setup(e){return(t,o)=>(Z(),De(Ae,null,{default:n(()=>[a(Ee)]),_:1}))}});export{$e as default};
