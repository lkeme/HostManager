import{k as le,L as W,N as ge,d as de,i as me,j as ce,l as Ae}from"./Page.vue_vue_type_script_setup_true_lang-D14GKTjX.js";import{j as ue,b as N,J as Y,O as Ce,w as fe,P as pe,E as be,z as n,Q as xe,R as Ze,l as D,n as y,m as S,T as _e,y as r,A as R,B as U,U as ye,V as we,D as he,q as Ne,s as De,_ as Be}from"./index-BdkqnUOq.js";const je="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8IS0tIOWkluWPkeWFieaViOaenCAtLT4NCiAgICA8ZmlsdGVyIGlkPSJnbG93IiB4PSItNTAlIiB5PSItNTAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIj4NCiAgICAgICAgPGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VHcmFwaGljIiBzdGREZXZpYXRpb249IjIiIHJlc3VsdD0iYmx1ciIvPg0KICAgICAgICA8ZmVNZXJnZT4NCiAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iYmx1ciIvPg0KICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+DQogICAgICAgIDwvZmVNZXJnZT4NCiAgICA8L2ZpbHRlcj4NCg0KICAgIDwhLS0g57KS5a2Q54m55pWIIC0tPg0KICAgIDxnIGlkPSJwYXJ0aWNsZXMiPg0KICAgICAgICA8IS0tIOWIm+W7uueykuWtkCAtLT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMTAwIiByPSIyIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjVzIiB2YWx1ZXM9IjIwMDsyMTA7MTkwOzIwMCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjVzIiB2YWx1ZXM9IjEwMDsxMTA7OTA7MTAwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjAwIiBjeT0iMTAwIiByPSIyIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjVzIiB2YWx1ZXM9IjIwMDsxOTA7MjEwOzIwMCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjVzIiB2YWx1ZXM9IjEwMDs5MDsxMTA7MTAwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICAgICAgPCEtLSDmt7vliqDmm7TlpJrnmoTnspLlrZAgLS0+DQogICAgICAgIDxjaXJjbGUgY3g9IjE4MCIgY3k9IjkwIiByPSIzIiBmaWxsPSIjZmZjMGNiIj4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBkdXI9IjZzIiB2YWx1ZXM9IjE4MDsxOTA7MTcwOzE4MCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjZzIiB2YWx1ZXM9IjkwOzEwMDs4MDs5MCIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4NCiAgICAgICAgPC9jaXJjbGU+DQogICAgICAgIDxjaXJjbGUgY3g9IjIyMCIgY3k9IjExMCIgcj0iNCIgZmlsbD0iI2ZmYzBjYiI+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJjeCIgZHVyPSI0cyIgdmFsdWVzPSIyMjA7MjMwOzIxMDsyMjAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJjeSIgZHVyPSI0cyIgdmFsdWVzPSIxMTA7MTIwOzEwMDsxMTAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgIDwvY2lyY2xlPg0KICAgICAgICA8IS0tIOabtOaUueeykuWtkOminOiJsuWSjOWkp+WwjyAtLT4NCiAgICAgICAgPGNpcmNsZSBjeD0iMjUwIiBjeT0iODAiIHI9IjIiIGZpbGw9IiNmZmMwY2IiPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGR1cj0iNXMiIHZhbHVlcz0iMjUwOzI2MDsyNDA7MjUwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3kiIGR1cj0iNXMiIHZhbHVlcz0iODA7OTA7NzA7ODAiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+DQogICAgICAgIDwvY2lyY2xlPg0KICAgICAgICA8Y2lyY2xlIGN4PSIxNTAiIGN5PSIxMjAiIHI9IjMiIGZpbGw9IiNmZmMwY2IiPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGR1cj0iNXMiIHZhbHVlcz0iMTUwOzE2MDsxNDA7MTUwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3kiIGR1cj0iNXMiIHZhbHVlcz0iMTIwOzEzMDsxMTA7MTIwIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPg0KICAgICAgICA8L2NpcmNsZT4NCiAgICA8L2c+DQoNCiAgICA8IS0tIEhNIOaWh+WtlyAtLT4NCiAgICA8dGV4dCB4PSI1MCUiIHk9IjUwJSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwMCIgZmlsbD0iI2UzZTM4NyIgZmlsdGVyPSJ1cmwoI2dsb3cpIj5IIE08L3RleHQ+DQo8L3N2Zz4NCg==",H="3.7.7",Me=H,x=typeof Buffer=="function",X=typeof TextDecoder=="function"?new TextDecoder:void 0,z=typeof TextEncoder=="function"?new TextEncoder:void 0,We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_=Array.prototype.slice.call(We),B=(e=>{let t={};return e.forEach((o,I)=>t[o]=I),t})(_),Se=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,i=String.fromCharCode.bind(String),k=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),E=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),L=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Q=e=>{let t,o,I,l,s="";const Z=e.length%3;for(let A=0;A<e.length;){if((o=e.charCodeAt(A++))>255||(I=e.charCodeAt(A++))>255||(l=e.charCodeAt(A++))>255)throw new TypeError("invalid character found");t=o<<16|I<<8|l,s+=_[t>>18&63]+_[t>>12&63]+_[t>>6&63]+_[t&63]}return Z?s.slice(0,Z-3)+"===".substring(Z):s},v=typeof btoa=="function"?e=>btoa(e):x?e=>Buffer.from(e,"binary").toString("base64"):Q,G=x?e=>Buffer.from(e).toString("base64"):e=>{let o=[];for(let I=0,l=e.length;I<l;I+=4096)o.push(i.apply(null,e.subarray(I,I+4096)));return v(o.join(""))},j=(e,t=!1)=>t?E(G(e)):G(e),Re=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?i(192|t>>>6)+i(128|t&63):i(224|t>>>12&15)+i(128|t>>>6&63)+i(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return i(240|t>>>18&7)+i(128|t>>>12&63)+i(128|t>>>6&63)+i(128|t&63)}},Ue=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,K=e=>e.replace(Ue,Re),F=x?e=>Buffer.from(e,"utf8").toString("base64"):z?e=>G(z.encode(e)):e=>v(K(e)),b=(e,t=!1)=>t?E(F(e)):F(e),O=e=>b(e,!0),Ge=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Pe=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),o=t-65536;return i((o>>>10)+55296)+i((o&1023)+56320);case 3:return i((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return i((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},$=e=>e.replace(Ge,Pe),q=e=>{if(e=e.replace(/\s+/g,""),!Se.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,o="",I,l;for(let s=0;s<e.length;)t=B[e.charAt(s++)]<<18|B[e.charAt(s++)]<<12|(I=B[e.charAt(s++)])<<6|(l=B[e.charAt(s++)]),o+=I===64?i(t>>16&255):l===64?i(t>>16&255,t>>8&255):i(t>>16&255,t>>8&255,t&255);return o},T=typeof atob=="function"?e=>atob(L(e)):x?e=>Buffer.from(e,"base64").toString("binary"):q,ee=x?e=>k(Buffer.from(e,"base64")):e=>k(T(e).split("").map(t=>t.charCodeAt(0))),te=e=>ee(oe(e)),ve=x?e=>Buffer.from(e,"base64").toString("utf8"):X?e=>X.decode(ee(e)):e=>$(T(e)),oe=e=>L(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),P=e=>ve(oe(e)),Te=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},se=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),re=function(){const e=(t,o)=>Object.defineProperty(String.prototype,t,se(o));e("fromBase64",function(){return P(this)}),e("toBase64",function(t){return b(this,t)}),e("toBase64URI",function(){return b(this,!0)}),e("toBase64URL",function(){return b(this,!0)}),e("toUint8Array",function(){return te(this)})},ae=function(){const e=(t,o)=>Object.defineProperty(Uint8Array.prototype,t,se(o));e("toBase64",function(t){return j(this,t)}),e("toBase64URI",function(){return j(this,!0)}),e("toBase64URL",function(){return j(this,!0)})},Ve=()=>{re(),ae()},J={version:H,VERSION:Me,atob:T,atobPolyfill:q,btoa:v,btoaPolyfill:Q,fromBase64:P,toBase64:b,encode:b,encodeURI:O,encodeURL:O,utob:K,btou:$,decode:P,isValid:Te,fromUint8Array:j,toUint8Array:te,extendString:re,extendUint8Array:ae,extendBuiltins:Ve},Ye=e=>(Ne("data-v-77723371"),e=e(),De(),e),Xe={class:"view-auth-bg flex flex-col h-full"},ze={class:"flex-1 px-8 py-4 max-w-[384px] min-w-[320px mx-auto"},ke={class:"py-8 text-center"},Fe=Ye(()=>y("div",{class:""},[y("img",{src:je,alt:"logo",class:"mx-auto"})],-1)),Oe={key:0,class:"text-sm text-red-500"},Je={key:0,class:"view-auth-register-form"},He={key:1,class:"view-auth-login-form"},Ee=ue({__name:"index",setup(e){const t=N(),o=Y({password:"",confirm_password:""}),I=g=>{var a;g.preventDefault(),(a=t.value)==null||a.validate(async d=>{var c;if(d)$message.error("注册信息填写有误，请检查后重新填写");else{$message.loading("尝试注册中..."),f.value=!0;try{const m=await ye(o.password,o.confirm_password),{data:u}=m;if($message.destroyAll(),u.status){const p=decodeURIComponent(((c=h.query)==null?void 0:c.redirect)||"/");$message.success("注册成功，即将进入系统"),h.name==="/login"?await w.replace("/"):await w.replace(p)}else $message.error(u.message||"注册失败")}finally{f.value=!1}}})},l=N(),s=Y({password:"",remember:!1}),Z=g=>{var a;g.preventDefault(),(a=l.value)==null||a.validate(async d=>{var c;if(d)$message.error("登录信息填写有误，请检查后重新填写");else{$message.loading("尝试登录中..."),f.value=!0;try{const m=await we(s.password),{data:u}=m;if($message.destroyAll(),u.status){ne();const p=decodeURIComponent(((c=h.query)==null?void 0:c.redirect)||"/");$message.success("登录成功"),h.name==="/login"?await w.replace("/"):await w.replace(p)}else $message.error(u.message||"登录失败")}finally{f.value=!1}}})},A=Ce(),ne=()=>{if(s.remember){A.setRememberInfo(J.encode(JSON.stringify(s)));return}A.removeRememberInfo()},ie=()=>{const g=A.getRememberInfo();if(g){const a=JSON.parse(J.decode(g));s.password=a.password,s.remember=a.remember}},f=N(!1),w=xe(),h=Ze(),V={password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"密码长度应为8-16",trigger:"blur"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/,message:"密码必须包含数字和字母",trigger:"blur"}],confirm_password:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(g,a,d)=>{a===o.password?d():d(new Error("两次输入密码不匹配"))},trigger:"blur"}]},M=N(!1);return fe(()=>{pe().then(g=>{M.value=g.data.is_register}),ie()}),(g,a)=>{const d=ge,c=de,m=me,u=he,p=ce,Ie=Ae;return D(),be(le,null,{default:n(()=>[y("div",Xe,[y("div",ze,[y("div",ke,[Fe,M.value?_e("",!0):(D(),S("div",Oe,"当前还未注册"))]),M.value?(D(),S("div",He,[r(p,{ref_key:"loginFormRef",ref:l,"label-placement":"left",size:"large",model:s,rules:V},{default:n(()=>[r(m,{path:"password"},{default:n(()=>[r(c,{value:s.password,"onUpdate:value":a[2]||(a[2]=C=>s.password=C),type:"password",showPasswordOn:"click",placeholder:"请输入密码"},{prefix:n(()=>[r(d,{size:"18",color:"#808695"},{default:n(()=>[r(R(W))]),_:1})]),_:1},8,["value"])]),_:1}),r(m,null,{default:n(()=>[r(Ie,{checked:s.remember,"onUpdate:checked":a[3]||(a[3]=C=>s.remember=C)},{default:n(()=>[U("记住密码")]),_:1},8,["checked"])]),_:1}),r(m,null,{default:n(()=>[r(u,{type:"primary",onClick:Z,size:"large",loading:f.value,block:""},{default:n(()=>[U(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):(D(),S("div",Je,[r(p,{ref_key:"registerFormRef",ref:t,"label-placement":"left",size:"large",model:o,rules:V},{default:n(()=>[r(m,{path:"password"},{default:n(()=>[r(c,{value:o.password,"onUpdate:value":a[0]||(a[0]=C=>o.password=C),type:"password",showPasswordOn:"click",placeholder:"请输入密码"},{prefix:n(()=>[r(d,{size:"18",color:"#808695"},{default:n(()=>[r(R(W))]),_:1})]),_:1},8,["value"])]),_:1}),r(m,{path:"confirm_password"},{default:n(()=>[r(c,{value:o.confirm_password,"onUpdate:value":a[1]||(a[1]=C=>o.confirm_password=C),type:"password",showPasswordOn:"click",placeholder:"请再次输入密码"},{prefix:n(()=>[r(d,{size:"18",color:"#808695"},{default:n(()=>[r(R(W))]),_:1})]),_:1},8,["value"])]),_:1}),r(m,null,{default:n(()=>[r(u,{type:"primary",onClick:I,size:"large",loading:f.value,block:""},{default:n(()=>[U(" 注册 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))])])]),_:1})}}}),Ke=Be(Ee,[["__scopeId","data-v-77723371"]]);export{Ke as default};
